SCRIPT_VERSION="2025.03.03-00-01"

[ttyd]
uci delete ttyd.ttyd 2>/dev/null
uci delete ttyd.@ttyd[-1] 2>/dev/null

uci commit ttyd

uci set ttyd.ttyd='ttyd'
uci set ttyd.ttyd.port='7681'
uci set ttyd.ttyd.interface='@lan'
uci set ttyd.ttyd.ipv6='1'
uci set ttyd.ttyd.command='/bin/login -f root'

uci del ttyd.ttyd.client_option 2>/dev/null
uci add_list ttyd.ttyd.client_option='theme={"background": "black"}'
uci add_list ttyd.ttyd.client_option='titleFixed=ttyd'

uci commit ttyd

uci add ttyd ttyd  # 新しいセクションを作成
uci set ttyd.@ttyd[-1].port='8888'
uci set ttyd.@ttyd[-1].interface='@lan'
uci set ttyd.@ttyd[-1].ipv6='1'
uci set ttyd.@ttyd[-1].command='/bin/login -f root'

uci del ttyd.@ttyd[-1].client_option 2>/dev/null
uci add_list ttyd.@ttyd[-1].client_option='theme={"background": "blue"}'
uci add_list ttyd.@ttyd[-1].client_option='titleFixed=aios'

uci commit ttyd

[irqbalance]
uci set irqbalance.irqbalance=irqbalance
uci set irqbalance.irqbalance.enabled='1'
uci commit irqbalance

[internet-detector]
install_package luci-compat hidden
install_package luci-lib-ipkg hidden
feed_package gSpotx2f packages-openwrt current luci-app-internet-detector hidden
feed_package gSpotx2f packages-openwrt current internet-detector-mod-modem-restart yn hidden
feed_package gSpotx2f packages-openwrt current internet-detector-mod-email yn hidden

[luci-app-diskman]
install_package luci-compat hidden disabled
install_package luci-lib-ipkg hidden disabled
install_package parted hidden disabled
install_package blkid hidden disabled
install_package smartmontools hidden disabled
install_package e2fsprogs hidden
install_package btrfs-progs yn hidden
install_package lsblk yn hidden
install_package mdadm yn hidden
install_package kmod-md-raid456 yn hidden
install_package kmod-md-linear yn hidden

[luci-theme-argon]
install_package luci-compat hidden　disabled
install_package luci-lib-ipkg hidden
feed_package_release yn kiddin9 luci-theme-edge

[samba4]
NAS="openwrt"
MNT="/mnt/sda"
uci set samba4.@samba[0]=samba
uci set samba4.@samba[0].workgroup='WORKGROUP'
uci set samba4.@samba[0].charset='UTF-8'
uci set samba4.@samba[0].description='Samba on OpenWRT'
uci set samba4.@samba[0].enable_extra_tuning='1'
uci set samba4.@samba[0].interface='lan'
uci set samba4.sambashare=sambashare
uci set samba4.sambashare.name=${NAS}
uci set samba4.sambashare.path=${MNT}
uci set samba4.sambashare.read_only='no'
uci set samba4.sambashare.force_root='1'
uci set samba4.sambashare.guest_ok='yes'
uci set samba4.sambashare.inherit_owner='yes'
uci set samba4.sambashare.create_mask='0777'
uci set samba4.sambashare.dir_mask='0777'
uci commit samba4


